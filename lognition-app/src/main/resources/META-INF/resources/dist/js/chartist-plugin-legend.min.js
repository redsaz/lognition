!function(e,t){"function"==typeof define&&define.amd?define(["chartist"],function(a){return e.returnExportsGlobal=t(a)}):"object"==typeof exports?module.exports=t(require("chartist")):e["Chartist.plugins.legend"]=t(e.Chartist)}(this,function(e){"use strict";var t={className:"",classNames:!1,removeAll:!1,legendNames:!1,clickable:!0,onClick:null,position:"top"};return e.plugins=e.plugins||{},e.plugins.legend=function(a){if(a&&a.position){if(!("top"===a.position||"bottom"===a.position||a.position instanceof HTMLElement))throw Error("The position you entered is not a valid position");if(a.position instanceof HTMLElement){var n=a.position;delete a.position}}return a=e.extend({},t,a),n&&(a.position=n),function(t){function n(e,t,n){var i=document.createElement("li");return i.classList.add("ct-series-"+String.fromCharCode(97+e%26)),n&&i.classList.add(a.classNames[e]),i.setAttribute("data-legend",e),i.textContent=t,i}var i;(i=t.container.querySelector(".ct-legend"))&&i.parentNode.removeChild(i);var s,o,r,l,c,d,u=((s=document.createElement("ul")).className="ct-legend",t instanceof e.Pie&&s.classList.add("ct-legend-inside"),"string"==typeof a.className&&a.className.length>0&&s.classList.add(a.className),t.options.width&&(s.style.cssText="width: "+t.options.width+"px;margin: 0 auto;"),s),f=t instanceof e.Pie&&t.data.labels&&t.data.labels.length,p=(o=f,a.legendNames||(o?t.data.labels:t.data.series)),m=function(e){for(var a=new Array(t.data.series.length),n=0;n<t.data.series.length;n++)a[n]={data:t.data.series[n],label:e?t.data.labels[n]:null,legend:-1};return a}(f),g=[],h=Array.isArray(a.classNames)&&a.classNames.length===p.length;p.forEach(function(e,t){var a=e.name||e,i=e.series||[t],s=n(t,a,h);u.appendChild(s),i.forEach(function(e){m[e].legend=t}),g.push({text:a,series:i,active:!0})}),t.on("created",function(e){!function(e){if(a.position instanceof HTMLElement)a.position.insertBefore(e,null);else switch(a.position){case"top":t.container.insertBefore(e,t.container.childNodes[0]);break;case"bottom":t.container.insertBefore(e,null)}}(u)}),a.clickable&&(t.data.series=t.data.series.map(function(a,n){return"object"!=typeof a&&(a={value:a}),a.className=a.className||t.options.classNames.series+"-"+e.alphaNumerate(n),a}),l=g,c=m,d=f,(r=u).addEventListener("click",function(e){var n=e.target;if(n.parentNode===r&&n.hasAttribute("data-legend")){e.preventDefault();var i=parseInt(n.getAttribute("data-legend")),s=l[i];if(s.active){s.active=!1,n.classList.add("inactive");var o=l.filter(function(e){return e.active}).length;if(!a.removeAll&&0==o)for(var u=0;u<l.length;u++)l[u].active=!0,r.childNodes[u].classList.remove("inactive")}else s.active=!0,n.classList.remove("inactive");var f=[],p=[];for(u=0;u<c.length;u++)-1!=c[u].legend&&l[c[u].legend].active&&(f.push(c[u].data),p.push(c[u].label));t.data.series=f,d&&(t.data.labels=p),t.update(),a.onClick&&a.onClick(t,e)}}))}},e.plugins.legend});
